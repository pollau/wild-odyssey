---
import Layout from "../layouts/Layout.astro";
import ActivityCard from "../components/ActivityCard.astro";
import { getCollection, getEntry } from "astro:content";

const homepage = await getEntry("homepage", "index");
const activities = await getCollection("activities");

// Title split for the effect
const heroTitleParts = homepage.data.heroTitle.split(".");
const mainHeroTitle = heroTitleParts[0] + ".";
const accentHeroTitle = heroTitleParts[1];
---

<Layout title="Accueil" headerTransparent={true}>
    <main class="min-h-screen">
        <!-- Hero Section -->
        <section
            class="relative h-screen w-full overflow-hidden flex items-center justify-center"
        >
            <!-- Background Image -->
            <div class="absolute inset-0 z-0">
                <img
                    src={homepage.data.heroImage || "/assets/images/hero.png"}
                    alt="Wild Odyssey - OcÃ©an et ForÃªt"
                    class="w-full h-full object-cover object-center"
                />
                <!-- Overlay for readability -->
                <div class="absolute inset-0 bg-black/30"></div>
            </div>

            <!-- Content -->
            <div class="relative z-10 text-center px-4 max-w-4xl mx-auto">
                <h1
                    class="font-heading text-4xl md:text-6xl text-white font-bold mb-6 leading-tight"
                >
                    {mainHeroTitle}<br />
                    <span class="text-accent">{accentHeroTitle}</span>
                    {
                        heroTitleParts.length > 2 && (
                            <span>{heroTitleParts[2]}</span>
                        )
                    }
                </h1>

                <p
                    class="font-sans text-lg md:text-xl text-gray-100 mb-8 max-w-2xl mx-auto"
                >
                    {homepage.data.heroSubtitle}
                </p>

                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a
                        href="/activities"
                        class="bg-primary hover:bg-green-800 text-white font-semibold py-3 px-8 rounded-full transition-all transform hover:scale-105 shadow-lg"
                    >
                        DÃ©couvrir nos ateliers
                    </a>
                    <a
                        href="/agenda"
                        class="bg-white hover:bg-gray-100 text-primary font-semibold py-3 px-8 rounded-full transition-all transform hover:scale-105 shadow-lg"
                    >
                        Voir l'agenda
                    </a>
                </div>
            </div>

            <!-- Scroll Indicator -->
            <div
                class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce cursor-pointer z-20"
                onclick="document.getElementById('enterprise').scrollIntoView({ behavior: 'smooth' })"
            >
                <svg
                    class="w-10 h-10 text-white/80 hover:text-white transition-colors"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 14l-7 7-7-7m14-8l-7 7-7-7"></path>
                </svg>
            </div>
        </section>

        <!-- Enterprise / B2B Section (Kept on Home as Main Hook) -->
        <section id="enterprise" class="py-20 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <span
                        class="text-secondary font-semibold tracking-wider uppercase text-sm"
                        >Offre Entreprise & RSE</span
                    >
                    <h2
                        class="font-heading text-3xl md:text-4xl font-bold text-gray-900 mt-2"
                    >
                        FÃ©dÃ©rez vos Ã©quipes autour du vivant
                    </h2>
                    <p class="mt-4 text-xl text-gray-500 max-w-3xl mx-auto">
                        Engagez vos collaborateurs avec des formats "sur-mesure"
                        (Team Building, SÃ©minaires, ConfÃ©rences) validÃ©s par les
                        plus grands groupes.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Card 1 -->
                    <div
                        class="bg-gray-50 rounded-xl p-8 border border-gray-100"
                    >
                        <div
                            class="w-12 h-12 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center mb-6"
                        >
                            <span class="text-2xl">ðŸŽ¯</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-4">
                            Team Building Ã  Impact
                        </h3>
                        <p class="text-gray-600">
                            Renforcez la cohÃ©sion (TÃªte, CÅ“ur, Mains) Ã  travers
                            des ateliers d'intelligence collective ou des
                            immersions nature.
                        </p>
                    </div>

                    <!-- Card 2 -->
                    <div
                        class="bg-gray-50 rounded-xl p-8 border border-gray-100"
                    >
                        <div
                            class="w-12 h-12 bg-green-100 text-green-600 rounded-lg flex items-center justify-center mb-6"
                        >
                            <span class="text-2xl">ðŸ“Š</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-4">
                            RSE & Sensibilisation
                        </h3>
                        <p class="text-gray-600">
                            RÃ©pondez aux enjeux de transformation durable.
                            Contenus alignÃ©s sur les standards scientifiques
                            (IPBES, CSRD).
                        </p>
                    </div>

                    <!-- Card 3 -->
                    <div
                        class="bg-gray-50 rounded-xl p-8 border border-gray-100"
                    >
                        <div
                            class="w-12 h-12 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center mb-6"
                        >
                            <span class="text-2xl">ðŸŽ¤</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-4">
                            ConfÃ©rences & Masterclass
                        </h3>
                        <p class="text-gray-600">
                            Formats courts et percutants (1h30) pour grands
                            groupes. Quiz interactifs et narratifs pour Ã©veiller
                            les consciences.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Teaser Activities -->
        <section class="py-20 bg-background relative z-20">
            <div class="max-w-6xl mx-auto px-4 text-center">
                <h2
                    class="font-heading text-3xl md:text-4xl font-bold text-primary mb-8"
                >
                    Nos Ateliers Phares
                </h2>
                <p class="mb-12 text-gray-600 max-w-2xl mx-auto">
                    DÃ©couvrez un aperÃ§u de nos expÃ©riences pÃ©dagogiques pour
                    petits et grands.
                </p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                    {
                        activities
                            .slice(0, 3)
                            .map((activity) => (
                                <ActivityCard
                                    title={activity.data.title}
                                    description={activity.data.description}
                                    duration={activity.data.duration}
                                    participants={activity.data.participants}
                                    color={activity.data.color}
                                    image={activity.data.image}
                                />
                            ))
                    }
                </div>

                <a
                    href="/activities"
                    class="inline-flex items-center text-primary font-bold hover:text-accent transition-colors"
                >
                    Voir tous les ateliers
                    <svg
                        class="w-5 h-5 ml-2"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        ><path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg
                    >
                </a>
            </div>
        </section>

        <!-- Social Proof / Logos -->
        <section id="impact" class="py-16 border-t border-gray-200 bg-white">
            <div class="max-w-6xl mx-auto px-4 text-center">
                <p class="text-gray-400 font-semibold mb-8">
                    APPROCHE RECONNUE ET VALIDÃ‰E PAR
                </p>
                <div
                    class="flex flex-wrap justify-center items-center gap-12 opacity-60 grayscale hover:grayscale-0 transition-all duration-500"
                >
                    <span class="text-xl font-bold text-gray-600">OFB</span>
                    <span class="text-xl font-bold text-gray-600">UICN</span>
                    <span class="text-xl font-bold text-gray-600"
                        >MinistÃ¨re Transition Ã‰cologique</span
                    >
                    <span class="text-xl font-bold text-gray-600">IPBES</span>
                </div>
            </div>
        </section>
    </main>
</Layout>
