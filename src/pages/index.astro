---
import Layout from '../layouts/Layout.astro';
import ActivityCard from '../components/ActivityCard.astro';
import { getCollection, getEntry } from 'astro:content';

const homepage = await getEntry('homepage', 'index');
const activities = await getCollection('activities');

// Title split for the effect
const heroTitleParts = homepage.data.heroTitle.split('.');
const mainHeroTitle = heroTitleParts[0] + '.';
const accentHeroTitle = heroTitleParts[1];
---

<Layout title="Accueil">
	<main class="min-h-screen">
		<!-- Hero Section -->
		<section class="relative h-screen w-full overflow-hidden flex items-center justify-center">
			
            <!-- Background Image -->
            <div class="absolute inset-0 z-0">
                <img 
                    src={homepage.data.heroImage || "/assets/images/hero.png"} 
                    alt="Wild Odyssey - Oc√©an et For√™t" 
                    class="w-full h-full object-cover"
                />
                <!-- Overlay for readability -->
                <div class="absolute inset-0 bg-black/30"></div>
            </div>

            <!-- Content -->
            <div class="relative z-10 text-center px-4 max-w-4xl mx-auto">
                <h1 class="font-heading text-4xl md:text-6xl text-white font-bold mb-6 leading-tight">
                    {mainHeroTitle}<br/>
                    <span class="text-accent">{accentHeroTitle}</span>
                    {heroTitleParts.length > 2 && <span>{heroTitleParts[2]}</span>}
                </h1>
                
                <p class="font-sans text-lg md:text-xl text-gray-100 mb-8 max-w-2xl mx-auto">
                    {homepage.data.heroSubtitle}
                </p>

                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="#activites" class="bg-primary hover:bg-green-800 text-white font-semibold py-3 px-8 rounded-full transition-all transform hover:scale-105 shadow-lg">
                        D√©couvrir nos ateliers
                    </a>
                </div>
            </div>
		</section>

        <!-- Activities Section -->
        <section id="activites" class="py-24 px-4 bg-background relative z-20 -mt-10 rounded-t-[3rem]">
            <div class="max-w-6xl mx-auto">
                <div class="text-center mb-16">
                    <span class="text-accent font-semibold tracking-wider uppercase text-sm">Nos Formats</span>
                    <h2 class="font-heading text-4xl md:text-5xl font-bold text-primary mt-3 mb-6">Des exp√©riences pour<br/>tous les besoins</h2>
                    <p class="max-w-2xl mx-auto text-gray-600 text-lg">
                        Du CP √† l'Universit√©, de la salle de classe au bord de mer, nous adaptons la p√©dagogie pour relier la t√™te, le c≈ìur et les mains.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8 lg:gap-12">
                    {activities.map((activity) => (
                        <ActivityCard 
                            title={activity.data.title}
                            description={activity.data.description}
                            duration={activity.data.duration}
                            participants={activity.data.participants}
                            color={activity.data.color}
                            image={activity.data.image}
                        />
                    ))}
                </div>
            </div>
        </section>

        <!-- Enterprise / B2B Section -->
        <section class="py-20 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <span class="text-secondary font-semibold tracking-wider uppercase text-sm">Offre Entreprise & RSE</span>
                    <h2 class="font-heading text-3xl md:text-4xl font-bold text-gray-900 mt-2">F√©d√©rez vos √©quipes autour du vivant</h2>
                    <p class="mt-4 text-xl text-gray-500 max-w-3xl mx-auto">
                        Engagez vos collaborateurs avec des formats "sur-mesure" (Team Building, S√©minaires, Conf√©rences) valid√©s par les plus grands groupes (Accor, LVMH, BCG).
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Card 1 -->
                    <div class="bg-gray-50 rounded-xl p-8 border border-gray-100">
                        <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center mb-6">
                            <span class="text-2xl">üéØ</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Team Building √† Impact</h3>
                        <p class="text-gray-600">Renforcez la coh√©sion (T√™te, C≈ìur, Mains) √† travers des ateliers d'intelligence collective ou des immersions nature ("Marche de l'Oc√©an").</p>
                    </div>

                    <!-- Card 2 -->
                    <div class="bg-gray-50 rounded-xl p-8 border border-gray-100">
                        <div class="w-12 h-12 bg-green-100 text-green-600 rounded-lg flex items-center justify-center mb-6">
                            <span class="text-2xl">üìä</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-4">RSE & Sensibilisation</h3>
                        <p class="text-gray-600">R√©pondez aux enjeux de transformation durable. Contenus align√©s sur les standards scientifiques (IPBES, CSRD) pour nourrir votre strat√©gie RSE.</p>
                    </div>

                    <!-- Card 3 -->
                    <div class="bg-gray-50 rounded-xl p-8 border border-gray-100">
                        <div class="w-12 h-12 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center mb-6">
                            <span class="text-2xl">üé§</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Conf√©rences & Masterclass</h3>
                        <p class="text-gray-600">Formats courts et percutants (1h30) pour grands groupes (jusqu'√† 200 pers). Quiz interactifs et narratifs pour √©veiller les consciences.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Social Proof / Logos -->
        <section id="impact" class="py-16 border-t border-gray-200 bg-white">
            <div class="max-w-6xl mx-auto px-4 text-center">
                <p class="text-gray-400 font-semibold mb-8">APPROCHE RECONNUE ET VALID√âE PAR</p>
                <div class="flex flex-wrap justify-center items-center gap-12 opacity-60 grayscale hover:grayscale-0 transition-all duration-500">
                    <!-- Text Placeholders for Logos until we have SVGs -->
                    <span class="text-xl font-bold text-gray-600">OFB</span>
                    <span class="text-xl font-bold text-gray-600">UICN</span>
                    <span class="text-xl font-bold text-gray-600">Minist√®re Transition √âcologique</span>
                    <span class="text-xl font-bold text-gray-600">IPBES</span>
                </div>
                <div class="mt-12 flex justify-center gap-16 text-center">
                    <div>
                        <div class="text-4xl font-bold text-secondary mb-1">+150k</div>
                        <div class="text-sm text-gray-500 font-medium">Participants</div>
                    </div>
                    <div>
                        <div class="text-4xl font-bold text-secondary mb-1">+1000</div>
                        <div class="text-sm text-gray-500 font-medium">√âtablissements</div>
                    </div>
                </div>
            </div>
        </section>
        <!-- About Section -->
        <section id="apropos" class="py-20 bg-primary text-white">
            <div class="max-w-5xl mx-auto px-4 flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/3">
                    <img 
                        src={homepage.data.aboutImage || "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?fit=crop&w=400&h=400"} 
                        alt={homepage.data.aboutTitle} 
                        class="rounded-full w-64 h-64 object-cover border-4 border-accent shadow-2xl mx-auto"
                    />
                </div>
                <div class="md:w-2/3 text-center md:text-left">
                    <span class="text-accent font-semibold tracking-wider uppercase text-sm mb-2 block">√Ä Propos</span>
                    <h2 class="font-heading text-3xl md:text-4xl font-bold mb-6">{homepage.data.aboutTitle}</h2>
                    <p class="text-lg text-gray-200 leading-relaxed mb-6 whitespace-pre-line">
                        {homepage.data.aboutBio}
                    </p>
                    
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 bg-background">
            <div class="max-w-4xl mx-auto px-4 text-center">
                <h2 class="font-heading text-3xl md:text-4xl font-bold text-primary mb-12">Contactez-nous</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    {homepage.data.contactEmail && (
                        <div class="p-6 bg-white rounded-2xl shadow-sm hover:shadow-md transition-shadow">
                            <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                                <span class="text-2xl">‚úâÔ∏è</span>
                            </div>
                            <h3 class="font-bold text-gray-800 mb-2">Email</h3>
                            <a href={`mailto:${homepage.data.contactEmail}`} class="text-primary hover:text-accent transition-colors">
                                {homepage.data.contactEmail}
                            </a>
                        </div>
                    )}

                    {homepage.data.contactPhone && (
                        <div class="p-6 bg-white rounded-2xl shadow-sm hover:shadow-md transition-shadow">
                            <div class="w-12 h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4">
                                <span class="text-2xl">üìû</span>
                            </div>
                            <h3 class="font-bold text-gray-800 mb-2">T√©l√©phone</h3>
                            <a href={`tel:${homepage.data.contactPhone}`} class="text-primary hover:text-accent transition-colors">
                                {homepage.data.contactPhone}
                            </a>
                        </div>
                    )}

                    {homepage.data.contactLinkedin && (
                        <div class="p-6 bg-white rounded-2xl shadow-sm hover:shadow-md transition-shadow">
                            <div class="w-12 h-12 bg-blue-50 text-blue-700 rounded-full flex items-center justify-center mx-auto mb-4">
                                <span class="text-2xl">üîó</span>
                            </div>
                            <h3 class="font-bold text-gray-800 mb-2">LinkedIn</h3>
                            <a href={homepage.data.contactLinkedin} target="_blank" rel="noopener noreferrer" class="text-primary hover:text-accent transition-colors">
                                Voir le profil
                            </a>
                        </div>
                    )}
                </div>
            </div>
        </section>
	</main>
</Layout>
