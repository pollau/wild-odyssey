---
const locale = Astro.currentLocale || 'fr';

const content = {
    fr: {
        title: "50% de l'oxygène que vous respirez vient de l'Océan",
        subtitle: "Scrollez pour comprendre pourquoi votre entreprise dépend du bleu",
        cta_title: "Ne retenez pas votre souffle",
        cta_desc: "L'Océan est le premier régulateur du climat. Former vos équipes, c'est sécuriser votre propre avenir.",
        cta_btn: "Réserver une Fresque Océane",
        depths: [
            { level: 0, title: "La Surface", desc: "Tout semble calme. Pourtant, +90% de la chaleur excédentaire mondiale est absorbée ici.", label: "Surface" },
            { level: 100, title: "Zone Épipélagique (-100m)", desc: "CECI EST VOTRE POUMON. Le phytoplancton produit 1 respiration sur 2. Sans lui, l'air devient rare.", label: "-100m" },
            { level: 500, title: "Zone Mésopélagique (-500m)", desc: "LA CHAÎNE ALIMENTAIRE BRISÉE. Les microplastiques ingérés ici finissent dans nos assiettes. C'est un risque sanitaire majeur.", label: "-500m" },
            { level: 1000, title: "Les Abysses (-1000m+)", desc: "LA BOMBE CARBONE. Les fonds marins stockent des gigatonnes de CO2. Si cet écosystème s'effondre, le climat s'emballe.", label: "-1000m" }
        ]
    },
    en: {
        title: "50% of the oxygen you breathe comes from the Ocean",
        subtitle: "Scroll to understand why your business depends on the blue",
        cta_title: "Don't hold your breath",
        cta_desc: "The Ocean is the primary climate regulator. Training your teams means securing your own future.",
        cta_btn: "Book an Ocean Collage",
        depths: [
            { level: 0, title: "The Surface", desc: "It looks calm. Yet, +90% of global excess heat is absorbed here.", label: "Surface" },
            { level: 100, title: "Epipelagic Zone (-100m)", desc: "THIS IS YOUR LUNG. Phytoplankton produce 1 in every 2 breaths. Without it, air becomes scarce.", label: "-100m" },
            { level: 500, title: "Mesopelagic Zone (-500m)", desc: "THE BROKEN CHAIN. Microplastics ingested here end up on our plates. It's a major health risk.", label: "-500m" },
            { level: 1000, title: "The Abyss (-1000m+)", desc: "THE CARBON BOMB. The seafloor stores gigatons of CO2. If this ecosystem collapses, the climate spirals out of control.", label: "-1000m" }
        ]
    },
    es: {
        title: "El 50% del oxígeno que respiras proviene del Océano",
        subtitle: "Desplázate para entender por qué tu empresa depende del azul",
        cta_title: "No contengas la respiración",
        cta_desc: "El Océano es el principal regulador del clima. Formar a tus equipos es asegurar tu propio futuro.",
        cta_btn: "Reservar un Mural del Océano",
        depths: [
            { level: 0, title: "La Superficie", desc: "Todo parece tranquilo. Sin embargo, +90% del calor excedente mundial se absorbe aquí.", label: "Superficie" },
            { level: 100, title: "Zona Epipelágica (-100m)", desc: "ESTE ES TU PULMÓN. El fitoplancton produce 1 de cada 2 respiraciones. Sin él, el aire escasea.", label: "-100m" },
            { level: 500, title: "Zona Mesopelágica (-500m)", desc: "LA CADENA ROTA. Los microplásticos ingeridos aquí terminan en nuestros platos. Es un riesgo sanitario mayor.", label: "-500m" },
            { level: 1000, title: "Los Abismos (-1000m+)", desc: "LA BOMBA DE CARBONO. El fondo marino almacena gigatoneladas de CO2. Si este ecosistema colapsa, el clima se descontrola.", label: "-1000m" }
        ]
    }
};

const t = content[locale];
const depths = t.depths;
---

<section id="deep-dive" class="relative w-full overflow-hidden text-white -mt-10 pt-20 pb-0">
    
    <!-- Top Wave Divider for better integration -->
    <div class="absolute top-0 left-0 w-full overflow-hidden leading-[0] transform rotate-180 z-20">
        <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none" class="relative block w-[calc(100%+1.3px)] h-[60px] fill-background">
            <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"></path>
        </svg>
    </div>

    <!-- Gradient Background -->
    <div class="absolute inset-0 z-0 bg-gradient-to-b from-[#0B3D91] via-[#006994] to-[#000d1a]"></div>
    
    <div class="relative z-10 max-w-5xl mx-auto px-6 py-24 pb-48 flex flex-col items-center">
        
        <div class="text-center mb-24 max-w-3xl">
            <h2 class="font-heading text-4xl md:text-5xl font-bold mb-6 leading-tight">{t.title}</h2>
            <p class="text-xl md:text-2xl text-blue-100 font-medium">{t.subtitle}</p>
            <div class="mt-12 animate-bounce">
                <svg class="w-10 h-10 text-white/50 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7-7-7m14-8l-7 7-7-7" />
                </svg>
            </div>
        </div>

        <!-- Depth Line Container -->
        <div class="relative w-full max-w-4xl">
            <div class="absolute left-4 md:left-1/2 top-0 bottom-0 w-1 bg-white/20 rounded-full"></div>

            <div class="space-y-40">
                {depths.map((depth, index) => (
                    <div class={`relative flex items-center ${index % 2 === 0 ? 'md:flex-row-reverse' : ''} group`}>
                        <!-- Dot -->
                        <div class="absolute left-4 md:left-1/2 -ml-[9px] w-6 h-6 bg-secondary rounded-full border-4 border-[#0B3D91] shadow-[0_0_20px_rgba(0,139,139,0.8)] z-20 group-hover:scale-125 transition-transform duration-300"></div>

                        <!-- Content Side -->
                        <div class="w-full md:w-1/2 pl-16 md:pl-0 md:px-12">
                            <div class="bg-white/5 backdrop-blur-sm p-8 rounded-2xl border border-white/10 hover:bg-white/10 transition-colors shadow-lg">
                                <div class="flex items-center gap-3 mb-4">
                                     <span class="inline-block px-3 py-1 rounded-full bg-secondary/80 text-white text-xs font-bold uppercase tracking-widest shadow-sm">
                                        {depth.label}
                                    </span>
                                </div>
                               
                                <h3 class="text-2xl font-bold mb-3 text-white">{depth.title}</h3>
                                <p class="text-blue-100 text-lg leading-relaxed">
                                    {depth.desc}
                                </p>
                            </div>
                        </div>

                        <!-- Spacer Side -->
                        <div class="hidden md:block w-1/2"></div>
                    </div>
                ))}
            </div>
        </div>

        <!-- Impact CTA -->
        <div class="text-center mt-40 max-w-2xl mx-auto bg-gradient-to-br from-white/10 to-transparent p-10 rounded-3xl border border-white/20 backdrop-blur-md">
            <h3 class="text-3xl md:text-4xl font-bold text-white mb-6 leading-tight">{t.cta_title}</h3>
            <p class="text-blue-100 text-lg mb-10">{t.cta_desc}</p>
            <a href="#contact" class="inline-flex items-center gap-2 bg-accent hover:bg-orange-600 text-white font-bold py-4 px-8 rounded-full shadow-[0_4px_20px_rgba(255,107,53,0.4)] transform hover:scale-105 transition-all text-lg">
                <span>{t.cta_btn}</span>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
            </a>
        </div>
    </div>
</section>
